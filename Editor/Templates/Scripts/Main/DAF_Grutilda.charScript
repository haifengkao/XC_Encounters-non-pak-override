INITTRIGGER:%CurrentTrigger = nullTRIGGER:%PreviousTrigger = nullTRIGGER:%PatrolSpot1 = DAF_GrutildaRoom1_8ad01985-3823-473d-9bc4-14d234a44a63TRIGGER:%PatrolSpot2 = DAF_GrutildaRoom3_d764eaf8-e1b4-4861-be6d-610b7f72fc7dTRIGGER:%PatrolSpot3 = DAF_GrutildaRoom5_8844b1f6-55f6-4f4c-8998-74596aafa070CHARACTER:__MeCHARACTER:%Imp = DAF_GrutildaGoblin_3a648c6f-ee41-4e23-a148-d3de24e7f33dINT:%ImpBusy = 0INT:%InOffice = 0BEHAVIOURREACTION ChooseAction, 1060USAGE PEACEVARS	FLOAT:_DistCHECK "c1"	IsEqual(%InOffice,1)ACTIONS	IF "c1&c2&!c3&c4&c5&!c6"		IsEqual(%ImpBusy,0)		IsRandom(0.2)		CharacterIsDead(%Imp)		GetDistance(_Dist,__Me,%Imp)		IsLessThen(_Dist,10.0)		IsInDialog(%Imp)	THEN		Sleep(10)		CharacterLookAt(%Imp)		DisplayText(__Me,"DAF_GrutCallsGoblin",5)
		Sleep(4)		CharacterEvent(%Imp,"GrutildaCalls")		Sleep(10)	ENDIF	GetRandom(%CurrentTrigger, %PatrolSpot1, %PatrolSpot2, %PatrolSpot3)	GotoIfEqual(%PreviousTrigger, %CurrentTrigger, "Start")	Set(%PreviousTrigger, %CurrentTrigger)	SetPriority("GoToSpot", 1070)	REACTION GoToSpot, 0USAGE PEACEACTIONS	CharacterMoveTo(%CurrentTrigger, 0)	CharacterLookFrom(%CurrentTrigger)	Sleep(5)	SetPriority("GoToSpot", 0)REACTION GiveOrder, 0USAGE PEACEVARS	STRING:_OrderACTIONS	GetRandom(_Order,"DAF_AD_GrutOrder_Dance","DAF_AD_GrutOrder_WhiskyRun")	CharacterLookAt(%Imp)	DialogStart(_Order,__Me,%Imp)	Set(%ImpBusy,1)		SetPriority("GiveOrder", 0)EVENTSEVENT GoblinArrivedON	OnCharacterEvent(__Me,"GoblinArrived")ACTIONS	SetPriority("GiveOrder",1200)	EVENT InHerOfficeON	OnCharacterEvent(__Me,"InHerOffice")ACTIONS	Set(%InOffice,1)EVENT LeftHerOfficeON	OnCharacterEvent(__Me,"LeftHerOffice")ACTIONS	Set(%InOffice,0)EVENT OrderCompletedON	OnCharacterEvent(__Me,"OrderCompleted")ACTIONS	Set(%ImpBusy,0)	EVENT CombatStopsDialogON	OnCombatStarted()ACTIONS	DialogRequestStop("DAF_AD_GrutOrder_Dance")	DialogRequestStop("DAF_AD_GrutOrder_WhiskyRun")